# ASA 預測專案 - 成績追蹤

## Kaggle Public Leaderboard 成績

| 提交順序 | 方法 | 特徵數 | 模型 | Kaggle Score | 相對提升 |
|----------|------|--------|------|--------------|----------|
| 1 | A: Baseline | 13 | LightGBM | 0.46513 | - |
| 2 | B: 完整特徵 | 40 | LightGBM | 0.52588 | +13.1% |
| 3 | C: 交互特徵 | 70 | LightGBM | 0.53120 | +1.0% |
| 4 | D: 模型融合 | 40+70 | LightGBM x2 | 0.52592 | -1.0% |
| 5 | E: 超參數調優 | 70 | LightGBM (tuned) | **0.53809** | **+1.3%** |
| 6 | F: SMOTE | 70 | LightGBM | 0.51602 | -4.1% |
| 7 | G: 三階交互 | 90 | LightGBM (tuned) | 0.53598 | -0.4% |

## 成績趨勢圖

```
Kaggle Score
    ^
0.54|                                    ⭐ E (0.53809)
    |                         C (0.53120)      G (0.53598)
0.53|
    |             B (0.52588)  D (0.52592)
0.52|
    |                                              F (0.51602)
0.51|
    |
0.50|
    |
0.49|
    |
0.48|
    |
0.47|
    | A (0.46513)
0.46|
    +--------------------------------------------------------> 時間
        A         B         C         D         E         F         G
```

## 本地驗證分數 vs Kaggle 分數

| 方法 | 本地 F1 | Kaggle Score | 差異 |
|------|---------|--------------|------|
| A | 0.4517 | 0.46513 | +2.9% |
| B | 0.5122 | 0.52588 | +2.7% |
| C | 0.4974 | 0.53120 | +6.8% |
| D | 0.5125 | 0.52592 | +2.6% |
| E | 0.5002 | 0.53809 | +7.6% |
| F | 0.4859 | 0.51602 | +6.2% |
| G | 0.4973 | 0.53598 | +7.8% |

**觀察**:
- Kaggle 分數普遍比本地高
- 方法C和E的差異特別大，表示這些方法在測試集上泛化更好
- **方法F (SMOTE) 效果不佳**：Kaggle 分數 0.51602 比方法C下降 2.9%，確認 SMOTE 在此資料集上無效

## 各方法改進貢獻分析

### 從 Baseline 到最佳成績的貢獻拆解

總提升: 0.46513 → 0.53809 = **+15.7%**

1. **特徵工程 (A→B)**: +13.1%
   - 新增 27 個特徵
   - Lab, Medication, Catheter, 衍生特徵

2. **交互特徵 (B→C)**: +1.0%
   - 新增 30 個二階交互項
   - PolynomialFeatures

3. **超參數調優 (C→E)**: +1.3%
   - Optuna 100 trials
   - 主要調整: learning_rate, n_estimators, regularization

4. **模型融合 (D)**: -1.0% (無效)
   - 融合權重可能不適合

5. **SMOTE (F)**: -4.1% (無效)
   - 過採樣導致模型過擬合合成樣本
   - 破壞了原始資料的分布特性

6. **三階交互 (G)**: -0.4% (無效)
   - 增加 20 個三階交互特徵 (90 vs 70)
   - 更高維度反而引入噪音，效果不如二階交互

## 待測試項目

- [x] F: SMOTE 提交 Kaggle → **0.51602 (無效)**
- [x] G: 三階交互 提交 Kaggle → **0.53598 (無效，略低於E)**
- [ ] H: 文字欄位結構化 (手術名稱、用藥等深度解析)
- [ ] 調整融合權重 (B:0.3, C:0.7)
- [ ] XGBoost/CatBoost 調優

---

*最後更新: 2026-01-20*
*當前最佳: 方法 E (0.53809)*
